var BasketCount={STORAGE_KEY:"bskc",ACTION_DISPLAY:"d",ACTION_UPDATE:"u",ACTION_WIPE:"w",init:function(t,e){if(this.storageAvailable()&&"string"==typeof(new XMLHttpRequest).responseType)switch(t){case this.ACTION_DISPLAY:this.displayCount();break;case this.ACTION_UPDATE:this.updateCount(e);break;case this.ACTION_WIPE:this.wipeCount()}},storageAvailable:function(){try{var t=window.localStorage,e="__test__";return t.setItem(e,e),t.removeItem(e),!0}catch(t){return!1}},displayCount:function(){var t=window.localStorage.getItem(this.STORAGE_KEY)||null,e=document.referrer;null===t||null!==e&&-1!==e.indexOf("PaymentDetail&msgcode=99")?this.getApiCount():this.doDomDisplay(t)},updateCount:function(t){window.localStorage.setItem(this.STORAGE_KEY,t),this.doDomDisplay(t)},wipeCount:function(){window.localStorage.removeItem(this.STORAGE_KEY)},doDomDisplay:function(t){var e=document.getElementById("bskc")||null,n=t,o=parseInt(t,10);99<o&&(n="99+"),0<o&&null!==e&&(e.innerHTML=n,e.className="bs-count")},getApiCount:function(){var t=new XMLHttpRequest;t.onload=BasketCount.handleApiData,t.open("POST","/servlet/ShoppingBasketApi",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.send("ac=z")},setApiCount:function(t){window.localStorage.setItem(BasketCount.STORAGE_KEY,t),BasketCount.doDomDisplay(t)},handleApiData:function(){if("OK"===this.statusText){var t=JSON.parse(this.responseText);200===t.statusCode&&BasketCount.setApiCount(t.totalCount)}}};