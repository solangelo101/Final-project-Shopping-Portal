var RecommendationsApi={getRecommendations:function(e,t,s){jQuery.ajax({url:"/servlet/RecommendationsApi",data:{pageId:e,itemIsbn13:t.itemIsbn13,offerId:t.offerId}}).done(function(e){for(var t=0;t<e.widgetResponses.length;t++)for(var n=0;n<e.widgetResponses[t].recommendationItems.length;n++){var o=e.widgetResponses[t].recommendationItems[n];void 0===o.attributes&&(o.attributes=[]),void 0===o.itemLink&&(void 0!==o.isbn13?o.itemLink="/products/isbn/"+o.isbn13:void 0!==o.offerId&&(o.itemLink="/servlet/BookDetailsPL?bi="+o.offerId))}0===e.widgetResponses.length?(e.recommendationItemList=[],e.algoName=null,e.ref=null):(e.recommendationItemList=e.widgetResponses[0].recommendationItems,e.algoName=e.recommendationItemList.algoName,e.ref=e.recommendationItemList.ref,e.title=e.widgetResponses[0].title),s(e)})}};!function(a){"use strict";a(document).ready(function(){var e=a(".featured-item");function i(e){var t=e.data("share");return null==t||"true"===t}e.length&&(e.mouseenter(function(){var e,t,n,o,s;i(a(this))&&(e=a(this).find(".item-title"),t=encodeURIComponent(e.attr("href")),n=encodeURIComponent(e.text()),o=a("#item-share-template").html(),Mustache.parse(o),s=Mustache.render(o,{shareUrl:t,shareTitle:n}),a(this).find(".item-share-container").append(s))}),e.mouseleave(function(){i(a(this))&&a(this).find(".item-share-container").children(".item-share").remove()}))})}(jQuery);var P13nHomePageRecommendations=P13nHomePageRecommendations||{};P13nHomePageRecommendations.display=function(){"use strict";var i=$("#recommendations-template").html();i&&(Mustache.parse(i),RecommendationsApi.getRecommendations("books",{},function(e){var t,n,o,s=e.widgetResponses;s&&s.constructor===Array&&s.forEach(function(e){e.core_metrics_key="rec-_-per-_-plp","blp-1"===e.slotName?(t=Mustache.render(i,e),(n=$("#bestsellers"))&&(n.html(t),n.show())):"blp-2"===e.slotName&&(t=Mustache.render(i,e),cmCreatePageElementTag("displayed","recommendations-per","books/index.shtml","n/a","books-landing-page","rec-displayed-per"),(o=$("#recommended-for-you"))&&(o.html(t),o.show()))})}))},function(e){"use strict";jQuery(document).ready(P13nHomePageRecommendations.display)}();